/*! forumplusone - 2016-06-24 */
!function(){function onload(){window.onloadFnc=window.onloadFnc||[];var i,c;for(i=0,c=window.onloadFnc.length;c>i;++i)window.onloadFnc[i].call()}if(!window.jQueryLoaderAlreadyLaunch)if(window.jQueryLoaderAlreadyLaunch=!0,"undefined"==typeof jQuery){var pathname,j=document.createElement("script"),head=document.getElementsByTagName("head")[0],done=!1,indexEndingSlash=location.pathname.lastIndexOf("/");if(-1==indexEndingSlash)throw new Error("WTF (What Terible Failure) ! I don't reconize the URL to load jQuery !");pathname=location.pathname.substring(0,indexEndingSlash+1)+"js/",j.src=location.origin+pathname+"jquery.min.js",j.onload=j.onreadystatechange=function(){(done||this.readyState)&&"loaded"!=this.readyState&&"complete"!=this.readyState||(done=!0,j.onload=j.onreadystatechange=null,jQuery(function(){onload()}))},head.appendChild(j)}else onload()}(window,document),function(){function onload(){function isRGBACapable(){var $script=$("script:first"),color=$script.css("color"),result=!1;if(/^rgba/.test(color))result=!0;else try{result=color!=$script.css("color","rgba(0, 0, 0, 0.5)").css("color"),$script.css("color",color)}catch(e){}return result}function calculateColor(begin,end,pos){var color="rgb"+($.support.rgba?"a":"")+"("+parseInt(begin[0]+pos*(end[0]-begin[0]),10)+","+parseInt(begin[1]+pos*(end[1]-begin[1]),10)+","+parseInt(begin[2]+pos*(end[2]-begin[2]),10);return $.support.rgba&&(color+=","+(begin&&end?parseFloat(begin[3]+pos*(end[3]-begin[3])):1)),color+=")"}function parseColor(color){var match,quadruplet;return quadruplet=(match=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(color))?[parseInt(match[1],16),parseInt(match[2],16),parseInt(match[3],16),1]:(match=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(color))?[17*parseInt(match[1],16),17*parseInt(match[2],16),17*parseInt(match[3],16),1]:(match=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))?[parseInt(match[1]),parseInt(match[2]),parseInt(match[3]),1]:(match=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(color))?[parseInt(match[1],10),parseInt(match[2],10),parseInt(match[3],10),parseFloat(match[4])]:colors[color]}var $=jQuery;$.extend(!0,$,{support:{rgba:isRGBACapable()}});var properties=["color","backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","outlineColor"];$.each(properties,function(i,property){$.Tween.propHooks[property]={get:function(tween){return $(tween.elem).css(property)},set:function(tween){var style=tween.elem.style,p_begin=parseColor($(tween.elem).css(property)),p_end=parseColor(tween.end);tween.run=function(progress){style[property]=calculateColor(p_begin,p_end,progress)}}}}),$.Tween.propHooks.borderColor={set:function(tween){var style=tween.elem.style,p_begin=[],borders=properties.slice(2,6);$.each(borders,function(i,property){p_begin[property]=parseColor($(tween.elem).css(property))});var p_end=parseColor(tween.end);tween.run=function(progress){$.each(borders,function(i,property){style[property]=calculateColor(p_begin[property],p_end,progress)})}}};var colors={aqua:[0,255,255,1],azure:[240,255,255,1],beige:[245,245,220,1],black:[0,0,0,1],blue:[0,0,255,1],brown:[165,42,42,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgrey:[169,169,169,1],darkgreen:[0,100,0,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkviolet:[148,0,211,1],fuchsia:[255,0,255,1],gold:[255,215,0,1],green:[0,128,0,1],indigo:[75,0,130,1],khaki:[240,230,140,1],lightblue:[173,216,230,1],lightcyan:[224,255,255,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],magenta:[255,0,255,1],maroon:[128,0,0,1],navy:[0,0,128,1],olive:[128,128,0,1],orange:[255,165,0,1],pink:[255,192,203,1],purple:[128,0,128,1],violet:[128,0,128,1],red:[255,0,0,1],silver:[192,192,192,1],white:[255,255,255,1],yellow:[255,255,0,1],transparent:[0,0,0,0]}}window.onloadFnc=window.onloadFnc||[],window.onloadFnc.push(onload)}(),function(){"use strict";function onload(){pageType==PAGE_TYPE_DISCUSSION_VIEW&&(discid=window.location.search.substring(1).split("&").map(function(a){return"d"==a.split("=")[0]?a.split("=")[1]:null}).join("")),intervalReload=setInterval(reload,1e3*window.liveReload.intervalReload)}function reload(){jQuery.get(window.liveReload.urlChange+"&discid="+discid,function(datas){return"undefined"!=typeof datas.errorCode&&0!=datas.errorCode||"undefined"!=typeof datas.error?void window.console.log("I got a XHR eror",datas):void(pageType==PAGE_TYPE_DISCUSSIONS_LIST?refreshDiscussionList(datas):refreshDiscussionView(datas))},"json")}function refreshDiscussionList(datas){var i,c,elem,content,countNew,predecessor;if(datas["new"].length>0){for(countNew=0,i=0,c=datas["new"].length;c>i;++i)if(elem=datas["new"][i],!(jQuery("#p"+elem.postid).length>0)){++countNew,content=elem.html,content=jQuery(jQuery.parseHTML(content)),content.addClass("newDiscussion"),content.hide(),content.insertAfter(".forumplusone-threads-wrapper .forumplusone-new-discussion-target");var bg=content.css("background-color");content.css("background-color","rgb(255, 221, 142)"),content.show(150),content.animate({backgroundColor:"rgba(255, 221, 142, 0)"},3e3,function(){content.css("background-color",bg)})}var counter=jQuery(".forumplusone-discussion-count"),count=counter.attr("data-count");counter.text(counter.text().replace(count,parseInt(count)+countNew)),counter.attr("data-count",parseInt(count)+countNew),jQuery(document.body).trigger("discussion:created")}if(datas.update.length>0){for(i=0,c=datas.update.length;c>i;++i)if(elem=datas.update[i],predecessor=jQuery("#p"+elem.postid),0!=predecessor.length){content=elem.html,content=jQuery(jQuery.parseHTML(content)),content.addClass("updatedDiscussion"),content.hide(),content.insertBefore(predecessor);var bg=content.css("background-color");content.css("background-color","rgb(255, 221, 142)"),content.show(),predecessor.remove(),content.animate({backgroundColor:"rgba(255, 221, 142, 0)"},3e3,function(){content.css("background-color",bg)})}jQuery(document.body).trigger("discussion:created")}if(datas.del.length>0){for(i=0,c=datas.del.length;c>i;++i)elem=datas.del[i],jQuery('[data-discussionid="'+elem.id+'"]').attr("data-delMsg",window.liveReload.msgDel),jQuery('[data-discussionid="'+elem.id+'"]').addClass("delDiscussion");var counter=jQuery(".forumplusone-discussion-count"),count=counter.attr("data-count");counter.text(counter.text().replace(count,parseInt(count)-datas.del.length)),counter.attr("data-count",parseInt(count)-datas.del.length),jQuery(document.body).trigger("discussion:deleted")}}function refreshDiscussionView(datas){var i,c,elem,content,post,parent,countReplies,predecessor,counterAdded=0;if(datas["new"].length>0){for(i=0,c=datas["new"].length;c>i;++i)if(elem=datas["new"][i],!(jQuery("#p"+elem.id).length>0)){++counterAdded,content=elem.html,content=jQuery(jQuery.parseHTML(content)),post=content.find(".forumplusone-post-wrapper"),parent=$("#p"+elem.parent),post.addClass("newPost"),post.hide(),parent.find(".forumplusone-count-replies *").removeClass("hidden"),parent.hasClass("forumplusone-thread")?(countReplies=parent.find(".counterReplies"),countReplies.removeAttr("hidden"),content.appendTo(parent.find(".forumplusone-thread-replies-list:first"))):content.appendTo(parent.next(".forumplusone-thread-replies-list"));var bg=post.css("background-color");post.css("background-color","rgb(255, 221, 142)"),post.show(150),post.animate({backgroundColor:"rgba(255, 221, 142, 0)"},3e3,function(){post.css("background-color",bg)})}var counter=jQuery(".counterReplies"),count=parseInt(counter.text());counter.text(counter.text().replace(count,parseInt(count)+counterAdded)),jQuery(document.body).trigger("post:created")}if(datas.update.length>0){for(i=0,c=datas.update.length;c>i;++i)if(elem=datas.update[i],predecessor=jQuery("#p"+elem.id),0!=predecessor.length){++counterAdded,content=jQuery(jQuery.parseHTML(elem.html)),content.hide(),0==elem.parent&&(predecessor=predecessor.find(".forumplusone-post-wrapper:first"),content.find("header").remove(),content.find(".forumplusone-thread-flags").after(predecessor.find("header"))),content.insertBefore(predecessor),content.find(".forumplusone-count-replies").replaceWith(predecessor.find(".forumplusone-count-replies"));var bg=content.css("background-color");content.css("background-color","rgb(255, 221, 142)"),content.show(),predecessor.remove(),content.animate({backgroundColor:"rgba(255, 221, 142, 0)"},3e3,function(){content.css("background-color",bg)})}jQuery(document.body).trigger("post:created"),jQuery(".votersPanel").prev(".forumplusone-post-wrapper").find(".forumplusone-show-voters-link").trigger("click")}if(datas.del.length>0){for(i=0,c=datas.del.length;c>i;++i)elem=datas.del[i],jQuery('[data-discussionid="'+elem.id+'"]').attr("data-delMsg",window.liveReload.msgDel),jQuery('[data-discussionid="'+elem.id+'"]').addClass("delDiscussion");var counter=jQuery(".counterReplies"),count=parseInt(counter.text());counter.text(counter.text().replace(count,parseInt(count)-datas.del.length)),jQuery(document.body).trigger("post:deleted")}"object"==typeof datas.disc&&(jQuery("h3").text(datas.disc.name),jQuery('.stateChanger input[type="radio"][value="'+datas.disc.state+'"]').prop("checked",!0),jQuery(".stateChanger").stateChange(datas.disc.state)),datas.isDel&&alert(window.liveReload.msgDel)}var pageType,PAGE_TYPE_DISCUSSIONS_LIST=0,PAGE_TYPE_DISCUSSION_VIEW=1;if(location.pathname.endsWith("view.php"))pageType=PAGE_TYPE_DISCUSSIONS_LIST;else{if(!location.pathname.endsWith("discuss.php"))throw new Error("variables are not defined");pageType=PAGE_TYPE_DISCUSSION_VIEW}if("undefined"==typeof window.liveReload)throw new Error("variables are not defined");var intervalReload=null,discid="";window.onloadFnc=window.onloadFnc||[],window.onloadFnc.push(onload)}(window,document);
//# sourceMappingURL=liveReload.min.js.map