/*! forumimproved - 2016-06-02 */
!function(){function a(){window.onloadFnc=window.onloadFnc||[];var a,b;for(a=0,b=window.onloadFnc.length;b>a;++a)window.onloadFnc[a].call()}if(!window.jQueryLoaderAlreadyLaunch)if(window.jQueryLoaderAlreadyLaunch=!0,"undefined"==typeof jQuery){var b,c=document.createElement("script"),d=document.getElementsByTagName("head")[0],e=!1,f=location.pathname.lastIndexOf("/");if(-1==f)throw new Error("WTF (What Terible Failure) ! I don't reconize the URL to load jQuery !");b=location.pathname.substring(0,f+1)+"js/",c.src=location.origin+b+"jquery.min.js",c.onload=c.onreadystatechange=function(){(e||this.readyState)&&"loaded"!=this.readyState&&"complete"!=this.readyState||(e=!0,c.onload=c.onreadystatechange=null,jQuery(function(){a()}))},d.appendChild(c)}else a()}(window,document),function(){"use strict";function a(){function a(a,b){var c=this;jQuery.get({url:"/mod/forumimproved/route.php",data:{contextid:b.find('input[name="contextid"]').val(),action:"changestate",state:a,discussionid:b.find('input[name="d"]').val()},success:function(b){if(0==b.errorCode)switch(a){case"0":jQuery(c).parents(".forumimproved-thread").removeClass("topic-closed topic-hidden");break;case"1":jQuery(c).parents(".forumimproved-thread").removeClass("topic-hidden").addClass("topic-closed");break;case"2":jQuery(c).parents(".forumimproved-thread").removeClass("topic-closed").addClass("topic-hidden")}}})}var b=jQuery(".stateChanger");jQuery(this).find("input[type=radio]");jQuery.fn.extend({stateChangerDispach:function(){return this.find('.select input[type="radio"]').on("change",function(){a.apply(this,[jQuery(this).val(),jQuery(this).parents("form")])}),this.find('[type="submit"]').css("display","none"),this}}),b.stateChangerDispach(),jQuery(document.body).on("discussion:created",function(){jQuery(".stateChanger").stateChangerDispach()}),jQuery(document.body).on("discussion:deleted",function(){jQuery(".stateChanger").stateChangerDispach()}),jQuery(document.body).on("form:canceled",function(){jQuery(".stateChanger").stateChangerDispach()}),jQuery(document.body).on("post:created",function(){jQuery(".stateChanger").stateChangerDispach()}),jQuery(document.body).on("post:deleted",function(){jQuery(".stateChanger").stateChangerDispach()}),jQuery(document.body).on("post:updated",function(){jQuery(".stateChanger").stateChangerDispach()})}window.onloadFnc=window.onloadFnc||[],window.onloadFnc.push(a)}(window,document);
//# sourceMappingURL=changeDiscussionState.min.js.map